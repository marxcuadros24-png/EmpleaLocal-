<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="EmpleaLocal - Plataforma de empleos locales en Coracora, Ayacucho">
  <meta name="keywords" content="empleo, trabajo, Coracora, Ayacucho, empleos locales">
  <title>EmpleaLocal - Encuentra tu trabajo en Coracora</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <!-- NAVBAR -->
  <header class="navbar">   
    <div class="logo">
      <img src="imagenes/logo1.png" alt="Logo EmpleaLocal">
    </div>
    <nav>
      <ul>
        <li><a href="index.html" class="active">Inicio</a></li>
        <li><a href="buscar.html">Buscar Empleo</a></li>
        <li><a href="oportunidades.html">Oportunidades</a></li>
        <li><a href="sobre.html">Sobre Nosotros</a></li>
        <li><a href="#contacto">Contacto</a></li>
        <li id="authNavLink"><a href="login.html">Login</a></li>
      </ul>
    </nav>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-content">
      <h1>Encuentra tu empleo ideal en <span>Coracora</span></h1>
      <p>Conecta digitalmente a trabajadores y empleadores locales de forma rÃ¡pida, segura y eficiente.</p>
      <div class="buttons">
        <a href="buscar.html" class="btn btn-primary">ğŸ” Buscar Empleo</a>
        <a href="login.html" class="btn btn-secondary">ğŸ“ Publicar Oferta</a>
      </div>
    </div>
  </section>

  <!-- OFERTAS RECIENTES CON CARRUSEL -->
  <section class="ofertas-section">
    <div class="carousel-fondo">
      <div class="slide active" style="background-image: url('imagenes/comida.png');"></div>
      <div class="slide" style="background-image: url('imagenes/construccion.jpg');"></div>
      <div class="slide" style="background-image: url('imagenes/docentes.jpg');"></div>
      <div class="slide" style="background-image: url('imagenes/deliveri.jpg');"></div>
      <div class="slide" style="background-image: url('imagenes/tiendaropa.jpg');"></div>
    </div>

    <div class="ofertas-content">
      <h2>âœ¨ Ãšltimos empleos publicados</h2>
      <div class="cards" id="recentJobsCards">
        <!-- Se llenarÃ¡n dinÃ¡micamente con JavaScript -->
        <div class="card">
          <h3>ğŸ›ï¸ Auxiliar de Ventas</h3>
          <p class="ubicacion">Comercio Â· Barrio Central</p>
          <a href="buscar.html" class="btn-card">Ver detalles</a>
        </div>
        <div class="card">
          <h3>ğŸ—ï¸ Obrero de ConstrucciÃ³n</h3>
          <p class="ubicacion">ConstrucciÃ³n Â· Chihuacc</p>
          <a href="buscar.html" class="btn-card">Ver detalles</a>
        </div>
        <div class="card">
          <h3>ğŸ“š Docente de Primaria</h3>
          <p class="ubicacion">EducaciÃ³n Â· Coracora</p>
          <a href="buscar.html" class="btn-card">Ver detalles</a>
        </div>
      </div>
      <div class="ver-mas">
        <a href="buscar.html" class="btn btn-primary">Ver todas las ofertas â†’</a>
      </div>
    </div>
  </section>

  <!-- CATEGORÃAS POPULARES -->
  <section class="categorias">
    <h2>ğŸ“‚ CategorÃ­as Populares</h2>
    <div class="grid">
      <div class="cat" onclick="location.href='buscar.html?categoria=servicios'">
        <span class="cat-icon">âš™ï¸</span>
        <span>Servicios</span>
      </div>
      <div class="cat" onclick="location.href='buscar.html?categoria=construccion'">
        <span class="cat-icon">ğŸ§±</span>
        <span>ConstrucciÃ³n</span>
      </div>
      <div class="cat" onclick="location.href='buscar.html?categoria=tecnologia'">
        <span class="cat-icon">ğŸ’»</span>
        <span>TecnologÃ­a</span>
      </div>
      <div class="cat" onclick="location.href='buscar.html?categoria=educacion'">
        <span class="cat-icon">ğŸ“</span>
        <span>EducaciÃ³n</span>
      </div>
      <div class="cat" onclick="location.href='buscar.html?categoria=comercio'">
        <span class="cat-icon">ğŸ›ï¸</span>
        <span>Comercio</span>
      </div>
      <div class="cat" onclick="location.href='buscar.html?categoria=transporte'">
        <span class="cat-icon">ğŸšš</span>
        <span>Transporte</span>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer id="contacto">
    <div class="footer-content">
      <div class="footer-section">
        <h3>EmpleaLocal</h3>
        <p>Conectando talento local en Coracora</p>
      </div>
      <div class="footer-section">
        <h3>Enlaces rÃ¡pidos</h3>
        <ul>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="buscar.html">Buscar Empleo</a></li>
          <li><a href="oportunidades.html">Oportunidades</a></li>
          <li><a href="sobre.html">Sobre Nosotros</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h3>Contacto</h3>
         <p>ğŸ“ <a href="https://maps.app.goo.gl/Lx5BD81hza6UHB4Z7" target="_blank" style="color: inherit; text-decoration: underline;">Coracora, Ayacucho, PerÃº</a></p>
        <p>ğŸ“§ info@emplealocal.pe</p>
        <p>ğŸ“± +51 999 999 999</p>
      </div>
      <div class="footer-section">
        <h3>SÃ­guenos</h3>
        <div class="social">
          <a href="https://www.facebook.com" target="_blank" title="Facebook">
            <img src="imagenes/facebook.png" alt="Facebook">
          </a>
          <a href="https://www.instagram.com" target="_blank" title="Instagram">
            <img src="imagenes/instagram.png" alt="Instagram">
          </a>
          <a href="https://www.linkedin.com" target="_blank" title="LinkedIn">
            <img src="imagenes/linkedin.png" alt="LinkedIn">
          </a>
        </div>
      </div>
    </div>
    <div class="footer-bottom">
      <p>Â© 2025 EmpleaLocal - Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/storage.js"></script>
  <script src="js/main.js"></script>
  <script>
    // ============================================
    // ACTUALIZAR NAVBAR CON USUARIO LOGUEADO
    // ============================================
    document.addEventListener('DOMContentLoaded', () => {
      updateAuthLink();
      loadRecentJobs();
    });

    /**
     * Actualizar enlace de autenticaciÃ³n en navbar
     */
    function updateAuthLink() {
      const authLink = document.getElementById('authNavLink');
      if (!authLink) return;

      // Verificar si hay usuario logueado
      const currentUserStr = localStorage.getItem('emplealocal_currentUser');
      
      if (currentUserStr) {
        try {
          const currentUser = JSON.parse(currentUserStr);
          
          // Mostrar nombre de usuario y enlace a dashboard
          authLink.innerHTML = `
            <a href="dashboard.html" style="color: #667eea; font-weight: 600;">
              ğŸ‘¤ ${escapeHtml(currentUser.name)}
            </a>
          `;
          
          console.log('âœ… Usuario logueado:', currentUser.name);
        } catch (error) {
          console.error('âŒ Error al parsear usuario:', error);
          authLink.innerHTML = '<a href="login.html">Login</a>';
        }
      } else {
        // No hay usuario logueado
        authLink.innerHTML = '<a href="login.html">Login</a>';
      }
    }

    /**
     * Cargar empleos recientes dinÃ¡micamente
     */
    function loadRecentJobs() {
      const cardsContainer = document.getElementById('recentJobsCards');
      if (!cardsContainer) return;

      // Verificar si StorageManager estÃ¡ disponible
      if (typeof StorageManager === 'undefined') {
        console.log('âš ï¸ StorageManager no disponible, usando cards estÃ¡ticas');
        return;
      }

      try {
        const allJobs = StorageManager.getJobs();
        
        if (allJobs && allJobs.length > 0) {
          // Mostrar Ãºltimos 3 empleos
          const recentJobs = allJobs.slice(0, 3);
          
          const cardsHTML = recentJobs.map(job => `
            <div class="card">
              <h3>${escapeHtml(job.title)}</h3>
              <p class="ubicacion">${escapeHtml(job.category)} Â· ${escapeHtml(job.location)}</p>
              <a href="buscar.html" class="btn-card">Ver detalles</a>
            </div>
          `).join('');
          
          cardsContainer.innerHTML = cardsHTML;
          console.log(`âœ… ${recentJobs.length} empleos recientes cargados`);
        }
      } catch (error) {
        console.error('âŒ Error al cargar empleos:', error);
      }
    }

    /**
     * Escapar HTML para prevenir XSS
     */
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }
  </script>
</body>
</html>